<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Enter Password</title>
    <style>
        body
        {
            font-weight: 300;
            color:#000000;
            background-color:#17408b;
        }
        nav
        {
            width: 100%;
            top: 0;
            height: 35px;
            background-color: #DCDCDC;
            font-size: 30px;
            font-weight: bold;
            word-spacing: 30px;
            font-family:"Helvetica";
            font-stretch:condensed;
            position: sticky;
        }

        a:link
        {
            color: black;
            text-decoration: none;
            text-shadow: 0 1px 1px #bbb,
			       0 2px 2px #666;
	        padding: 10px;
        }

        a:visited
        {
            color: black;
        }

        a:hover
        {
            color: #c9082a;
            text-shadow: 0 1px 1px #ddd,
            0 2px 2 #c5bba5;
        }

        h1, h2
        {
            font-family:"Helvetica";
            font-stretch:condensed;
	        color: #ffffff;
	        text-shadow: 0 2px 2px #000000;
        }
        p
        {
            color:red;
            font-family:sans-serif;
        }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
<nav>
    <a href="index.html">HOME</a>
    <a href="Game.html">GAMES</a>
    <a href="password-insert.html">INSERT</a>
    <a href="password-delete.html">DELETE</a>
</nav>
<body>
<h1>Enter Password:</h1>
<input type="text" id="password" name="password" value="Password">
<button id="submission">Submit</button>
<p id="response"></p>

<script>
document.getElementById("submission").addEventListener("click", RetrievePassword);

function RetrievePassword()
{
    var correct_password, entered;
    var AJAXFail = false, PasswordAccept = false, PasswordDeny = false;
    entered = document.getElementById("password").value;
        $.ajax({
            cache: false,
            async: false,
            url: "/cgi-bin/simpleGame.py",
            type: "post",
            datatype:"json",
            data: {'password':'True'},
            success: function(response)
            {
                reply = JSON.stringify(response);
                console.log(reply);
                password_dict = JSON.parse(reply);
                correct_password = password_dict.password;

                if (entered === correct_password)
                {
                    PasswordAccept = true;
                }
                else
                {
                    PasswordDeny = true;
                }
            },
            error: function(xhr, status, error)
            {
                AJAXFail = true;
            },
        });
    if (AJAXFail === true)
    {
        document.getElementById("response").innerHTML = "AJAX Call Failed.";
    }
    else if (PasswordDeny === true)
    {
        document.getElementById("response").innerHTML = "Incorrect.  Try Again.";
    }
    else if (PasswordAccept === true)
    {
        document.getElementById("response").innerHTML = "Correct!";
        window.location = "insert.html";
    }
}
</script>
</body>
</html>